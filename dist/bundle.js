!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.width=n,this.height=r,this.canvas=this.id?document.getElementById(t):document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.initiate()}var t,n,i;return t=e,(n=[{key:"initiate",value:function(){this.canvas.width=this.width,this.canvas.height=this.height}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getContext",value:function(){return this.ctx}},{key:"setWidth",value:function(e){return this.canvas.width=e,this}},{key:"setHeight",value:function(e){return this.canvas.height=e,this}},{key:"circle",value:function(e,t,n,r,i){return this.ctx.beginPath(),this.ctx.arc(e,t,n,0,2*Math.PI),this.ctx.closePath(),this.ctx.fillStyle=r,this.ctx.strokeStyle=i,this.ctx.fill(),this.ctx.stroke(),this}},{key:"rect",value:function(e,t,n,r,i,a){return this.ctx.fillStyle=i,this.ctx.strokeStyle=a,this.ctx.beginPath(),this.ctx.rect(e,t,n,r),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this}},{key:"line",value:function(e,t,n,r,i,a){return this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(n,r),this.ctx.closePath(),this.ctx.strokeStyle=i,this.ctx.stroke(),this}},{key:"path",value:function(e,t,n,r){this.ctx.beginPath();for(var i=0;i<e.length;i++){var a=e[i];0===i?this.ctx.moveTo(a[0],a[1]):this.ctx.lineTo(a[0],a[1])}return this.ctx.closePath(),this.ctx.strokeStyle=n,this.ctx.fillStyle=t,this.ctx.fill(),this.ctx.stroke(),this}},{key:"clear",value:function(){return this.ctx.clearRect(0,0,this.width,this.height),this}},{key:"clearRect",value:function(e,t,n,r){return this.ctx.clearRect(e,t,n,r),this}}])&&r(t.prototype,n),i&&r(t,i),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"infiniteLoop",value:function(e){var t=new Date;return function n(){var r=new Date;e(+r-+t),t=r,requestAnimationFrame(n)}}},{key:"conditionalLoop",value:function(e){var t=new Date;return function n(){var r=new Date;e(+r-+t)&&(t=r,requestAnimationFrame(n))}}},{key:"interruptibleLoop",value:function(e,t){var n=new Date;return function r(){var i=new Date,a=+i-+n;t()&&e(a),n=i,requestAnimationFrame(r)}}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;u(this,e),this.vertexIndices=t,this.strokeColor=n,this.fillColor=r,this.texture=i}var t,n,r;return t=e,(n=[{key:"setTexture",value:function(e){this.texture=e}},{key:"setStrokeColor",value:function(e){this.strokeColor=e}},{key:"setFillColor",value:function(e){this.fillColor=e}}])&&c(t.prototype,n),r&&c(t,r),e}();function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,e),this._matrix=[],this._columns=n,this._rows=t;for(var a=0;a<t;a++){this._matrix[a]=[];for(var o=0;o<n;o++)this._matrix[a][o]=null===i?r:i[a][o]}}var t,n,r;return t=e,(n=[{key:"add",value:function(e){for(var t=0;t<this._rows;t++)for(;0<this._columns;t++)this._matrix[t][0]+=e.matrix[t][0];return this}},{key:"subtract",value:function(e){for(var t=0;t<this._rows;t++)for(;0<this._rows;t++)this._matrix[t][0]-=e.matrix[t][0];return this}},{key:"scale",value:function(e){for(var t=0;t<this.rows;t++)for(;0<this.columns;t++)this._matrix[t][0]*=e;return this}},{key:"matrix",get:function(){return this._matrix}},{key:"columns",get:function(){return this._columns}},{key:"rows",get:function(){return this._rows}}])&&h(t.prototype,n),r&&h(t,r),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"add",value:function(e,t){for(var n=new f(e.rows,e.columns,0),r=0;r<e.rows;r++)for(var i=0;i<e.columns;i++)n.matrix[r][i]=e.matrix[r][i]+t.matrix[r][i];return n}},{key:"subtract",value:function(e,t){for(var n=new f(e.rows,e.columns),r=0;r<e.rows;r++)for(var i=0;i<e.columns;i++)n.matrix[r][i]=e.matrix[r][i]-t.matrix[r][i];return n}},{key:"scale",value:function(e,t){for(var n=new f(e.rows,e.columns),r=0;r<n.rows;r++)for(var i=0;i<n.columns;i++)n.matrix[r][i]=e.matrix[r][i]*t;return n}},{key:"product",value:function(e,t){if(e.columns!==t.rows)throw new Error("Mismatch between number of columns in this matrix and number of rows in foreign matrix");for(var n=new f(e.rows,t.columns,0),r=0;r<e.rows;r++)for(var i=0;i<t.columns;i++)for(var a=0;a<e.columns;a++)n.matrix[r][i]+=e.matrix[r][a]*t.matrix[a][i];return n}}],(n=null)&&v(t.prototype,n),r&&v(t,r),e}();function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"matrix",value:function(e,t){return new f(e,t)}},{key:"identity",value:function(e){for(var t=new f(e,e,0),n=0;n<e;n++)t.matrix[n][n]=1;return t}},{key:"createFrom1DArray",value:function(e){var t=[e];return this.createFrom2DArray(t)}},{key:"createFrom2DArray",value:function(e){for(var t=e.length,n=e[0].length,r=new f(t,n),i=0;i<t;i++)for(var a=0;a<n;a++)r.matrix[i][a]=e[i][a];return r}},{key:"transpose",value:function(e){for(var t=[],n=0;n<e.matrix[0].length;n++){t[n]=[];for(var r=0;r<e.matrix.length;r++)t[n][r]=e.matrix[r][n]}return new f(e.matrix[0].length,e.matrix.length,0,t)}}],(n=null)&&d(t.prototype,n),r&&d(t,r),e}();function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=180/Math.PI,b=Math.PI/180,k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"pythagoras",value:function(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e+=Math.pow(o,2)}return Math.sqrt(e)}},{key:"convertDegreesToRadians",value:function(e){return e*b}},{key:"convertRadiansToDegrees",value:function(e){return e*p}}],(n=null)&&w(t.prototype,n),r&&w(t,r),e}(),m=[[1,0,0],[0,1,0],[0,0,1]],x=[[-1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],P=[[1,0,0,0],[0,-1,0,0],[0,0,1,0],[0,0,0,1]],T=[[1,0,0,0],[0,1,0,0],[0,0,-1,0],[0,0,0,1]];function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"scale",value:function(e){0===e&&(e=1);for(var t=g.identity(4),n=0;n<m.length;n++)for(var r=0;r<m[0].length;r++)t.matrix[n][r]=m[n][r]*e;return t}},{key:"reflect",value:function(e){switch(e){case"x":return new f(4,4,0,x);case"y":return new f(4,4,0,P);case"z":return new f(4,4,0,T);default:throw new Error("No valid rotation axis specified")}}},{key:"translateAndRotate",value:function(e,t,n,r){var i=this.translate(e),a=this.rotate(t,n,r);return y.product(i,a)}},{key:"rotate",value:function(e,t,n){var r=this.rotateX(e),i=y.product(r,this.rotateY(t));return y.product(i,this.rotateZ(n))}},{key:"scaleAndRotate",value:function(e,t,n,r){var i=this.rotate(t,n,r);return y.product(i,this.scale(e))}},{key:"rotateInOneDirection",value:function(e,t){switch(e){case"x":return this.rotateX(t);case"y":return this.rotateY(t);case"z":return this.rotateZ(t);default:throw new Error("No valid rotation axis specified")}}},{key:"rotateX",value:function(e){var t=k.convertDegreesToRadians(e);return new f(4,4,0,[[1,0,0,0],[0,Math.cos(t),Math.sin(t),0],[0,-1*Math.sin(t),Math.cos(t),0],[0,0,0,1]])}},{key:"rotateY",value:function(e){var t=k.convertDegreesToRadians(e);return new f(4,4,0,[[Math.cos(t),0,-1*Math.sin(t),0],[0,1,0,0],[Math.sin(t),0,Math.cos(t),0],[0,0,0,1]])}},{key:"rotateZ",value:function(e){var t=k.convertDegreesToRadians(e),n=[[Math.cos(t),Math.sin(t),0,0],[-1*Math.sin(t),Math.cos(t),0,0],[0,0,1,0],[0,0,0,1]];return new f(4,4,0,n)}},{key:"translate",value:function(e){var t=g.identity(4).matrix;return t[3][0]=e.x,t[3][1]=e.y,t[3][2]=e.z,new f(4,4,0,t)}}],(n=null)&&M(t.prototype,n),r&&M(t,r),e}();function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;A(this,e),this._x=t,this._y=n,this._z=r,this._w=i}var t,n,r;return t=e,(n=[{key:"asArray",value:function(){return[this._x,this._y,this._z,this._w]}},{key:"toJSON",value:function(){return{x:this._x,y:this._y,z:this._z,w:this._w}}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"z",get:function(){return this._z},set:function(e){this._z=e}}])&&O(t.prototype,n),r&&O(t,r),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"points3DToArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n].asArray();return t}},{key:"arrayToPoints3D",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=new j(r[0],r[1],r[2]);t.push(i)}return t}}],(n=null)&&C(t.prototype,n),r&&C(t,r),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"point3DToMatrix",value:function(e){return new f(4,1,0,[[e.x],[e.y],[e.z],[e.w]])}},{key:"points3DToMatrix",value:function(e){var t=z.points3DToArray(e);return new f(t.length,4,0,t)}},{key:"matrixToPoints3D",value:function(e){var t=e.matrix;return z.arrayToPoints3D(t)}},{key:"applyMatrixToPoints3D",value:function(t,n){var r=this.points3DToMatrix(n),i=y.product(r,t);return e.matrixToPoints3D(i)}}],(n=null)&&_(t.prototype,n),r&&_(t,r),e}();function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t,n,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=r,this.y=i,this.z=a,this.vertices=t,this.polygons=n,this.alteredVertices=E(this.vertices)}var t,n,r;return t=e,(n=[{key:"addPolygon",value:function(e,t,n,r,i){var a=new s(e,t,n,r,i);this.polygons.push(a)}},{key:"getVertices",value:function(){return this.vertices}},{key:"getAlteredVertices",value:function(){return this.alteredVertices}},{key:"getPolygons",value:function(){return this.polygons}},{key:"getPosition",value:function(){return new j(this.x,this.y,this.z)}},{key:"rotate",value:function(e,t,n){var r=D.rotate(e,t,n);return this.applyMatrixToAlteredVertices(r),this}},{key:"scale",value:function(e){var t=D.scale(e);return this.applyMatrixToAlteredVertices(t),this}},{key:"rotateX",value:function(e){return this.rotateInOneDirection("x",e),this}},{key:"rotateY",value:function(e){return this.rotateInOneDirection("y",e),this}},{key:"rotateZ",value:function(e){return this.rotateInOneDirection("z",e),this}},{key:"rotateInOneDirection",value:function(e,t){var n=D.rotateInOneDirection(e,t);this.applyMatrixToAlteredVertices(n)}},{key:"applyMatrixToAlteredVertices",value:function(e){this.alteredVertices=S.applyMatrixToPoints3D(e,this.alteredVertices)}},{key:"resetAlteredVertices",value:function(){this.alteredVertices=E(this.vertices)}}])&&R(t.prototype,n),r&&R(t,r),e}();function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#ffffff",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=[new j(-1*r,-1*r,1*r),new j(1*r,-1*r,1*r),new j(1*r,1*r,1*r),new j(-1*r,1*r,1*r),new j(-1*r,-1*r,-1*r),new j(1*r,-1*r,-1*r),new j(1*r,1*r,-1*r),new j(-1*r,1*r,-1*r)],u=[new s([0,1,5],i,a),new s([0,5,4],i,a),new s([1,2,6],i,a),new s([1,6,5],i,a),new s([2,3,7],i,a),new s([2,7,6],i,a),new s([3,0,4],i,a),new s([3,4,7],i,a),new s([4,5,6],i,a),new s([4,6,7],i,a),new s([3,2,1],i,a),new s([3,1,0],i,a)];return new I(o,u,e,t,n)}}],(n=null)&&V(t.prototype,n),r&&V(t,r),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"white",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=108,u=60,c=2*r*Math.cos(k.convertDegreesToRadians(.5*o)),l=Math.cos(k.convertDegreesToRadians(u))*c,h=r+l,f=Math.sqrt(Math.pow(c,2)-Math.pow(l,2)),v=Math.sqrt(Math.pow(r,2)-Math.pow(.5*c,2))+r,y=Math.sin(k.convertDegreesToRadians(u))*v,d=f+y,g=d/2*-1,w=[],p=0;p<5;p++){var b=Math.sin(k.convertDegreesToRadians(72*p))*r,m=Math.cos(k.convertDegreesToRadians(72*p))*r;w.push(new j(m,g,b)),b=Math.sin(k.convertDegreesToRadians(72*p))*h,m=Math.cos(k.convertDegreesToRadians(72*p))*h;var x=f;w.push(new j(m,g+x,b)),b=Math.sin(k.convertDegreesToRadians(72*p+180))*h,m=Math.cos(k.convertDegreesToRadians(72*p+180))*h,x=d-f,w.push(new j(m,g+x,b)),b=Math.sin(k.convertDegreesToRadians(72*p+180))*r,m=Math.cos(k.convertDegreesToRadians(72*p+180))*r,x=d,w.push(new j(m,g+x,b))}var P=[new s([0,1,14,5,4],i,a),new s([4,5,18,9,8],i,a),new s([8,9,2,13,12],i,a),new s([12,13,6,17,16],i,a),new s([16,17,10,1,0],i,a),new s([7,6,13,2,3],i,a),new s([11,10,17,6,7],i,a),new s([15,14,1,10,11],i,a),new s([19,18,5,14,15],i,a),new s([3,2,9,18,19],i,a),new s([0,4,8,12,16],i,a),new s([19,15,11,7,3],i,a)];return new I(w,P,e,t,n)}}],(n=null)&&L(t.prototype,n),r&&L(t,r),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"white",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=[new j(0,1*r*i,0),new j(1*r,0,-1*r),new j(1*r,0,1*r),new j(-1*r,0,1*r),new j(-1*r,0,-1*r)],c=[new s([3,2,1],a,o),new s([4,3,1],a,o),new s([0,1,2],a,o),new s([0,2,3],a,o),new s([0,3,4],a,o),new s([0,4,1],a,o)];return new I(u,c,e,t,n)}}],(n=null)&&q(t.prototype,n),r&&q(t,r),e}();function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var X=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"white",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=[new j(0,1*r*i,0),new j(1*r,0,-1*r),new j(1*r,0,1*r),new j(0,-1*r,0)],c=[new s([3,2,1],a,o),new s([0,1,2],a,o),new s([0,2,3],a,o),new s([0,3,1],a,o)];return new I(u,c,e,t,n)}}],(n=null)&&Y(t.prototype,n),r&&Y(t,r),e}();function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(e,t,n,r,i,a,o){for(var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"white",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,l=[],h=[],f=r*a/2,v=i*o/2,y=0;y<=r;y++)for(var d=0;d<=i;d++){var g=new j(-1*f+y*a,-1*v+d*o,0);if(l.push(g),y<r&&d<i){var w=d*(i+1),p=(d+1)*(i+1),b=y+1+p,k=y+p,m=y+w,x=y+1+w,P=new s([b,k,m],u,c),T=new s([b,m,x],u,c);h.push(P),h.push(T)}}return new I(l,h,e,t,n)}}],(n=null)&&Z(t.prototype,n),r&&Z(t,r),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(e,t,n,r,i,a){for(var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"white",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=[],l=[],h=360/i,f=0;f<a;f++)for(var v=0;v<i;v++){var y=new j(Math.sin(k.convertDegreesToRadians(h*v))*r,Math.cos(k.convertDegreesToRadians(h*v))*r,f*r);if(c.push(y),f>0){var d=f*i,g=(f-1)*i,w=(0===v?i:v)-1+g,p=v+d,b=(0===v?i:v)-1+d,m=v+g,x=new s([w,p,b],o,u),P=new s([w,m,p],o,u);l.push(x),l.push(P)}}return new I(c,l,e,t,n)}}],(n=null)&&B(t.prototype,n),r&&B(t,r),e}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"white",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=[new j(-1*r,0,20),new j(1*r,0,20),new j(0,1*r,20)],u=[new s([0,1,2],i,a)];return new I(o,u,e,t,n)}}],(n=null)&&U(t.prototype,n),r&&U(t,r),e}();function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(e,t,n,r,i,a,o){for(var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"white",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,l=[],h=[],f=0;f<r;f++)for(var v=Math.sin(k.convertDegreesToRadians(360/r*f)),y=Math.cos(k.convertDegreesToRadians(360/r*f)),d=0;d<i;d++){var g=Math.sin(k.convertDegreesToRadians(360/i*d))*a,w=v*(o+g),p=y*(o+g),b=Math.cos(k.convertDegreesToRadians(360/i*d))*a;l.push(new j(w,b,p)),h.push(new s([i*f+d,i*((f+1)%r)+(d+1)%i,i*f+(d+1)%i],u,c)),h.push(new s([i*f+d,i*((f+1)%r)+d,i*((f+1)%r)+(d+1)%i],u,c))}return new I(l,h,e,t,n)}}],(n=null)&&K(t.prototype,n),r&&K(t,r),e}();function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"white",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=[],c=[],l=0;l<=i;l++)for(var h=Math.sin(k.convertDegreesToRadians(180/i*l))*r,f=0;f<i;f++){var v=Math.cos(k.convertDegreesToRadians(180/i*l))*r,y=Math.sin(k.convertDegreesToRadians(360/i*f))*h,d=Math.cos(k.convertDegreesToRadians(360/i*f))*h;u.push(new j(v,y,d)),l>0&&(c.push(new s([(l-1)*i+(f+1)%i,(l-1)*i+f,l*i+f],a,o)),c.push(new s([(l-1)*i+(f+1)%i,l*i+f,l*i+(f+1)%i],a,o)))}return new I(u,c,e,t,n)}}],(n=null)&&$(t.prototype,n),r&&$(t,r),e}();function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"cube",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#ffffff",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return F.create(e,t,n,r,i,a)}},{key:"dodecahedron",value:function(e,t,n,r){return arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],W.create(e,t,n,r,"white",null)}},{key:"pyramid",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"white",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return H.create(e,t,n,r,i,a,o)}},{key:"tetrahedron",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"white",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return X.create(e,t,n,r,i,a,o)}},{key:"mesh",value:function(e,t,n,r,i,a,o){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"white",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;return N.create(e,t,n,r,i,a,o,u,c)}},{key:"prism",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"white",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return J.create(e,t,n,r,i,a,o,u)}},{key:"triangle",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"white",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return G.create(e,t,n,r,i,a)}},{key:"torus",value:function(e,t,n,r,i,a,o){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"white",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;return Q.create(e,t,n,r,i,a,o,u,c)}},{key:"sphere",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"white",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return ee.create(e,t,n,r,i,a,o)}}],(n=null)&&te(t.prototype,n),r&&te(t,r),e}();function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ie=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}var t,n,r;return t=e,(n=[{key:"asArray",value:function(){return[this.x,this.y]}},{key:"toJSON",value:function(){return{x:this.x,y:this.y}}}])&&re(t.prototype,n),r&&re(t,r),e}();function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var oe=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.screenWidth=t,this.screenHeight=n,this.horizontalFieldOfViewAngle=r,this.canvasId=a,this.canvas=new i(this.canvasId,this.screenWidth,this.screenHeight),this.aspectRatio=this.screenHeight/this.screenWidth,this.halfScreenWidth=this.screenWidth/2,this.halfScreenHeight=this.screenHeight/2,this.distanceToProjectionPlane=this.calculateDistanceToProjectionPlane(this.horizontalFieldOfViewAngle),this.verticalFieldOfViewAngle=this.calculateVerticalFieldOfViewAngle(this.aspectRatio,this.distanceToProjectionPlane),this.initiate()}var t,n,r;return t=e,(n=[{key:"initiate",value:function(){this.canvas.setWidth(this.screenWidth),this.canvas.setHeight(this.screenHeight)}},{key:"getCanvas",value:function(){return this.canvas.getCanvas()}},{key:"getContext",value:function(){return this.canvas.getContext()}},{key:"getHalfScreenWidth",value:function(){return this.halfScreenWidth}},{key:"clearScreen",value:function(){return this.canvas.clear()}},{key:"calculateDistanceToProjectionPlane",value:function(e){var t=k.convertDegreesToRadians(e/2);return 1/Math.tan(t)*this.halfScreenWidth}},{key:"calculateVerticalFieldOfViewAngle",value:function(e,t){return 2*Math.atan(e/t)}},{key:"getProjected2DPoint",value:function(e){var t=this.distanceToProjectionPlane/e.z*e.x,n=this.distanceToProjectionPlane/e.z*e.y;return new ie(this.halfScreenWidth+t,this.halfScreenHeight+n)}}])&&ae(t.prototype,n),r&&ae(t,r),e}();function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"sort",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=[],a=[],o=0;o<t.length;o++)switch(r){case 0:n=e[t[o].vertexIndices[0]].z;for(var u=0;u<t[o].vertexIndices.length;u++)e[t[o].vertexIndices[u]].z<n&&(n=e[t[o].vertexIndices[u]].z);i[o]={value:n,polygon:t[o]};break;case 1:n=e[t[o].vertexIndices[0]].z;for(var c=0;c<t[o].vertexIndices.length;c++)e[t[o].vertexIndices[c]].z>n&&(n=e[t[o].vertexIndices[c]].z);i[o]={value:n,polygon:t[o]};break;case 2:n=0;for(var s=0;s<t[o].vertexIndices.length;s++)n+=e[t[o].vertexIndices[s]].z;n/=t[o].vertexIndices.length,i[o]={value:n,polygon:t[o]};break;default:console.log("No accepted value given")}i.sort((function(e,t){return t.value-e.value}));for(var l=0;l<i.length;l++)a.push(i[l].polygon);return a}}],(n=null)&&ue(t.prototype,n),r&&ue(t,r),e}();function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var le=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"add",value:function(e,t){for(var n=[],r=0;r<e.coordinatesAsArray.length;r++)n[r]=e.coordinatesAsArray[r]+t.coordinatesAsArray[r];return n}},{key:"subtract",value:function(e,t){for(var n=[],r=0;r<e.coordinatesAsArray.length;r++)n[r]=e.coordinatesAsArray[r]-t.coordinatesAsArray[r];return n}},{key:"scale",value:function(e,t){for(var n=[],r=0;r<e.coordinatesAsArray.length;r++)n[r]=e.coordinatesAsArray[r]*t;return n}},{key:"crossProduct",value:function(e,t){var n=e.coordinates.y*t.coordinates.z-e.coordinates.z*t.coordinates.y,r=e.coordinates.z*t.coordinates.x-e.coordinates.x*t.coordinates.z,i=e.coordinates.x*t.coordinates.y-e.coordinates.y*t.coordinates.x;return new fe(n,r,i)}},{key:"projection",value:function(e,t){var n=e.dotProduct(t)/Math.pow(t.magnitude,2);return t.coordinatesAsArray,this.scale(t,n)}}],(n=null)&&se(t.prototype,n),r&&se(t,r),e}();function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fe=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.z=r}var t,n,r;return t=e,(n=[{key:"toPolar",value:function(){return{radius:k.pythagoras(this.x,this.y),phi:k.convertRadiansToDegrees(k.pythagoras(this.x,this.y,this.z)),theta:k.convertRadiansToDegrees(Math.atan(this.y/this.x))}}},{key:"addVector",value:function(e){var t=le.add(this,e);this.x=t[0],this.y=t[1],this.z=t[2]}},{key:"subtractVector",value:function(e){var t=le.subtract(this,e);this.x=t[0],this.y=t[1],this.z=t[2]}},{key:"scale",value:function(e){var t=le.scale(this,e);this.x=t[0],this.y=t[1],this.z=t[2]}},{key:"dotProduct",value:function(e){var t=e.coordinatesAsArray[0]*this.x;return t+=e.coordinatesAsArray[1]*this.y,t+=e.coordinatesAsArray[2]*this.z,t}},{key:"isPerpendicularTo",value:function(e){return 0==this.dotProduct(e)}},{key:"lengthOfProjectionOnto",value:function(e){return this.dotProduct(e)/e.magnitude}},{key:"angleBetween",value:function(e){var t=this.dotProduct(e);return Math.acos(t/this.magnitude/e.magnitude)}},{key:"crossProduct",value:function(e){var t=le.crossProduct(this,e),n=t.coordinatesAsArray;this.x=n[0],this.y=n[1],this.z=n[2]}},{key:"perpendicular",value:function(t){var n=le.projection(this,t),r=new e(n[0],n[1],n[2]),i=le.subtract(this,r);return i}},{key:"coordinates",get:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"coordinatesAsArray",get:function(){return[this.x,this.y,this.z]}},{key:"magnitude",get:function(){var e=Math.pow(this.x,2);return e+=Math.pow(this.y,2),e+=Math.pow(this.z,2),e=Math.sqrt(e)}},{key:"unitLength",get:function(){return 1/this.magnitude}}])&&he(t.prototype,n),r&&he(t,r),e}();function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ye=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"point3DToVector3D",value:function(e){return new fe(e.x,e.y,e.z)}},{key:"vector3DToPoint3D",value:function(e){return new j(e.x,e.y,e.z)}}],(n=null)&&ve(t.prototype,n),r&&ve(t,r),e}();function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createVector3DFromPolar",value:function(e){var t=k.convertDegreesToRadians(e.phi),n=k.convertDegreesToRadians(e.theta),r=e.radius*Math.sin(t)*Math.cos(n),i=e.radius*Math.sin(t)*Math.sin(n),a=e.radius*Math.cos(t);return new fe(r,i,a)}},{key:"createVector3DFromArray",value:function(e){return new fe(e[0],e[1],e[2])}}],(n=null)&&de(t.prototype,n),r&&de(t,r),e}();function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"determine",value:function(e,t,n){var r=ye.point3DToVector3D(t[n.vertexIndices[0]]),i=ye.point3DToVector3D(t[n.vertexIndices[1]]),a=ye.point3DToVector3D(t[n.vertexIndices[2]]),o=ge.createVector3DFromArray(le.subtract(i,r)),u=ge.createVector3DFromArray(le.subtract(a,r)),c=le.crossProduct(o,u);return r.dotProduct(c)>=0}}],(n=null)&&we(t.prototype,n),r&&we(t,r),e}();function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var me=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;be(this,e),this.sourcePoint=t,this.cl=n,this.kc=r,this.kl=i,this.kq=a}var t,n,r;return t=e,(n=[{key:"setX",value:function(e){this.sourcePoint.x=e}},{key:"setY",value:function(e){this.sourcePoint.y=e}},{key:"setZ",value:function(e){this.sourcePoint.z=e}},{key:"calculate",value:function(e,t){var n=Math.abs(this.sourcePoint.x-t.x),r=Math.abs(this.sourcePoint.y-t.y),i=Math.abs(this.sourcePoint.z-t.z),a=k.pythagoras(n,r),o=k.pythagoras(i,a),u=this.kc+this.kl*o+this.kq*Math.pow(o,2);return{r:e.r*this.cl/u,g:e.g*this.cl/u,b:e.b*this.cl/u}}},{key:"asJSON",value:function(){return{sourcePoint:this.sourcePoint,cl:this.cl,kc:this.kc,kl:this.kl,kq:this.kq}}},{key:"x",get:function(){return this.sourcePoint.x}},{key:"y",get:function(){return this.sourcePoint.y}},{key:"z",get:function(){return this.sourcePoint.z}}])&&ke(t.prototype,n),r&&ke(t,r),e}();function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Pe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var De={svg:1,canvasVectors:2,canvasPixelated:3},Ae=De.canvasVectors,Oe=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Te(this,e),this.applyBackFaceCulling=n,this.viewFrustum=t,this.objects=[],this.lights=[],this.correctedLights=[],this.context=t.getContext()}var t,n,r;return t=e,(n=[{key:"setCamera",value:function(e){this.camera=e}},{key:"addObject",value:function(e){this.objects.push(e)}},{key:"addLight",value:function(e){this.lights.push(e)}},{key:"addObjects",value:function(e){for(var t=0;t<e.length;t++)this.addObject(e[t]);return this}},{key:"addLights",value:function(e){for(var t=0;t<e.length;t++)this.addLight(e[t]);return this}},{key:"getObjects",value:function(){return this.objects}},{key:"draw",value:function(){this.viewFrustum.clearScreen();var e=[],t=[],n=0,r=D.translateAndRotate(this.camera,this.camera.rotationX,this.camera.rotationY,this.camera.rotationZ);this.calculateCorrectedLights(r);var i=!0,a=!1,o=void 0;try{for(var u,c=this.objects[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value,l=s.getPosition(),h=D.translate(l),f=y.product(h,r),v=S.applyMatrixToPoints3D(f,s.getAlteredVertices()),d=this.shiftVertexIndicesOfPolygons(s.getPolygons(),n);e=[].concat(Pe(e),Pe(d)),t=[].concat(Pe(t),Pe(v)),n+=v.length}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}var g=ce.sort(t,e),w=!0,p=!1,b=void 0;try{for(var k,m=g[Symbol.iterator]();!(w=(k=m.next()).done);w=!0){var x=k.value,P=new j(0,0,-1*this.viewFrustum.getHalfScreenWidth());this.applyBackFaceCulling&&!pe.determine(P,t,x)||this.drawPolygon(t,x)}}catch(e){p=!0,b=e}finally{try{w||null==m.return||m.return()}finally{if(p)throw b}}}},{key:"calculateCorrectedLights",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=this.lights[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value,c=new j(u.x,u.y,u.z),s=xe(S.applyMatrixToPoints3D(e,[c]),1)[0],l=u.asJSON(),h=l.cl,f=l.kc,v=l.kl,y=l.kq;t.push(new me(s,h,f,v,y))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}this.correctedLights=t}},{key:"shiftVertexIndicesOfPolygons",value:function(e,t){for(var n=[],r=0;r<e.length;r++){for(var i=[],a=e[r],o=0;o<a.vertexIndices.length;o++)i[o]=a.vertexIndices[o]+t;n.push(new s(i,a.strokeColor,a.fillColor,a.isFilled,a.isStroked))}return n}},{key:"drawPolygon",value:function(e,t){switch(Ae){case De.svg:break;case De.canvasVectors:this.drawPolygonCanvasVectors(e,t);break;case De.pixelated:break;default:throw new Error("Unknown drawing method specified")}}},{key:"drawPolygonCanvasVectors",value:function(e,t){var n={x:0,y:0,z:0};this.context.beginPath();for(var r=0;r<t.vertexIndices.length;r++){t.vertexIndices.length;var i=e[t.vertexIndices[r]],a=this.viewFrustum.getProjected2DPoint(i);0==r?this.context.moveTo(a.x,a.y):this.context.lineTo(a.x,a.y),n.x+=i.x,n.y+=i.y,n.z+=i.z}var o=new j(n.x/t.vertexIndices.length,n.y/t.vertexIndices.length,n.z/t.vertexIndices.length);return this.context.closePath(),null!==t.strokeColor&&(this.context.strokeStyle=this.determineLighting(t.strokeColor,o)),this.context.stroke(),null!==t.fillColor&&(this.context.fillStyle=this.determineLighting(t.fillColor,o),this.context.fill()),this}},{key:"determineLighting",value:function(e,t){var n={r:0,g:0,b:0},r=!0,i=!1,a=void 0;try{for(var o,u=this.correctedLights[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=o.value.calculate(e,t),s=c.r,l=c.g,h=c.b;n.r+=s,n.g+=l,n.b+=h}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}var f=n={r:Math.min(n.r,255),g:Math.min(n.g,255),b:Math.min(n.b,255)},v=f.g,y=f.b;return"rgb(".concat(f.r,",").concat(v,",").concat(y,")")}}])&&Me(t.prototype,n),r&&Me(t,r),e}();function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}for(var ze=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;je(this,e),this._x=t,this._y=n,this._z=r,this._rotationX=i,this._rotationY=a,this._rotationZ=o}var t,n,r;return t=e,(n=[{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"z",get:function(){return this._z},set:function(e){this._z=e}},{key:"rotationX",get:function(){return this._rotationX},set:function(e){this._rotationX=e}},{key:"rotationY",get:function(){return this._rotationY},set:function(e){this._rotationY=e}},{key:"rotationZ",get:function(){return this._rotationZ},set:function(e){this._rotationZ=e}}])&&Ce(t.prototype,n),r&&Ce(t,r),e}(),_e=[ne.cube(10,0,0,3).rotate(4,12,8),ne.mesh(0,10,0,8,8,4,4).rotate(90,0,0),ne.prism(0,7,0,2,15,10).rotate(90,0,0),ne.torus(0,5,0,32,12,1,5).rotate(10,0,0),ne.sphere(0,-5,0,5,32)],Se=new oe(800,500,60,"canvas"),Ee=0,Re=new ze(0,0,50,0,0,0),Ie=new Oe(Se),Ve=o.infiniteLoop((function(e){var t=.09*e,n=Ie.getObjects(),r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){o.value.rotate(0,0,0)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}Ee=(Ee+t)%360,Re.x=50*Math.sin(k.convertDegreesToRadians(Ee)),Re.z=50*Math.cos(k.convertDegreesToRadians(Ee)),Re.rotationY=-Ee,Ie.draw()})),Fe=[new me(new j(0,0,-10),1,1,0,.02)],Le=[{r:255,g:0,b:0},{r:0,g:255,b:0},{r:0,g:0,b:255},{r:255,g:255,b:0},{r:255,g:165,b:0},{r:165,g:42,b:42},{r:255,g:255,b:255},{r:255,g:192,b:203},{r:128,g:128,b:128},{r:255,g:0,b:255},{r:0,g:128,b:128}],We=0,qe=_e;We<qe.length;We++)for(var He=qe[We].getPolygons(),Ye=0;Ye<He.length;Ye++){var Xe=He[Ye];Xe.setStrokeColor(Le[Ye%Le.length]),Xe.setFillColor(Le[Ye%Le.length])}Ie.addLights(Fe),Ie.setCamera(Re),Ie.addObjects(_e),Ve()}]);